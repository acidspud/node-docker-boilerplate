{"version":3,"sources":["webpack:///webpack/bootstrap 8a89b83088d8de0d65ee","webpack:///./server/common/logger.js","webpack:///external \"express\"","webpack:///external \"path\"","webpack:///./server/index.js","webpack:///./server/api/controllers/examples/controller.js","webpack:///./server/api/controllers/examples/router.js","webpack:///./server/api/services/examples.service.js","webpack:///./server/common/env.js","webpack:///./server/common/server.js","webpack:///./server/common/swagger/index.js","webpack:///./server/routes.js","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///external \"dotenv\"","webpack:///external \"http\"","webpack:///external \"os\"","webpack:///external \"pino\"","webpack:///external \"swagger-express-middleware\""],"names":["l","pino","name","process","env","APP_ID","level","LOG_LEVEL","router","listen","PORT","Controller","all","req","res","ExamplesService","then","r","json","byId","params","id","status","end","create","body","location","post","controller","get","examples","info","constructor","Promise","resolve","example","push","dotenv","config","app","ExpressServer","root","__dirname","set","use","extended","cookieParser","SESSION_SECRET","Express","static","routes","swaggerify","port","welcome","http","middleware","err","enable","metadata","files","caseSensitive","strict","useBasePath","apiPath","SWAGGER_API_SPEC","parseRequest","cookie","secret","limit","REQUEST_LIMIT","CORS","validateRequest","next","send","message"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8a89b83088d8de0d65ee","import pino from 'pino'\nconst l = pino({\n  name: process.env.APP_ID,\n  level: process.env.LOG_LEVEL\n});\n\nexport default l;\n\n\n// WEBPACK FOOTER //\n// ./server/common/logger.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 2\n// module chunks = 0","import './common/env';\nimport Server from './common/server';\nimport routes from './routes';\n\nexport default new Server()\n  .router(routes)\n  .listen(process.env.PORT);\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","import ExamplesService from '../../services/examples.service';\nexport class Controller {\n  all (req, res) {\n    ExamplesService\n      .all()\n      .then((r) => res.json(r));\n  }\n\n  byId (req, res) {\n    ExamplesService\n      .byId(req.params.id)\n      .then((r) => {\n        if (r) {\n          res.json(r);\n        } else {\n          res.status(404).end();\n        }\n      });\n  }\n\n  create (req, res) {\n    ExamplesService\n      .create(req.body.name)\n      .then((r) => res\n        .status(201)\n        .location(`/api/v1/examples/${r.id}`)\n        .json(r));\n  }\n}\nexport default new Controller();\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/controllers/examples/controller.js","import * as express from 'express';\nimport controller from './controller'\nexport default express.Router()\n    .post('/', ::controller.create)\n    .get('/', ::controller.all)\n    .get('/:id', ::controller.byId);\n\n\n// WEBPACK FOOTER //\n// ./server/api/controllers/examples/router.js","import l from '../../common/logger';\n\nlet id = 0;\nconst examples = [\n    { id: id++, name: 'example 0' }, \n    { id: id++, name: 'example 1' }\n];\n\nexport class ExamplesService {\n  all() {\n    l.info(`${this.constructor.name}.all()`);\n    return Promise.resolve(examples);\n  }\n\n  byId(id) {\n    l.info(`${this.constructor.name}.byId(${id})`);\n    return this.all().then(r => r[id])\n  }\n\n  create(name) {\n    const example = {\n      id: id++,\n      name\n    };\n    \n    examples.push(example);\n    l.info(example, `${this.constructor.name}.create(${name})`);\n    \n    return Promise.resolve(example);\n  }\n}\n\nexport default new ExamplesService();\n\n\n// WEBPACK FOOTER //\n// ./server/api/services/examples.service.js","import dotenv from 'dotenv';\ndotenv.config();\n\n\n// WEBPACK FOOTER //\n// ./server/common/env.js","import Express from 'express';\nimport * as path from 'path';\nimport * as bodyParser from 'body-parser';\nimport * as http from 'http';\nimport * as os from 'os';\nimport cookieParser from 'cookie-parser';\nimport swaggerify from './swagger';\nimport l from './logger';\n\nconst app = new Express();\n\nexport default class ExpressServer {\n  constructor () {\n    const root = path.normalize(`${__dirname}/../..`);\n    app.set('appPath', `${root}client`);\n    app.use(bodyParser.json());\n    app.use(\n      bodyParser.urlencoded({\n        extended: true\n      })\n    );\n    app.use(cookieParser(process.env.SESSION_SECRET));\n    app.use(Express.static(`${root}/public`));\n  }\n\n  router (routes) {\n    swaggerify(app, routes);\n    return this;\n  }\n\n  listen (port = process.env.PORT) {\n    const welcome = (port) => () => l.info(`up and running in ${process.env.NODE_ENV || 'development'} @: ${os.hostname() } on port: ${port}}`);\n    http.createServer(app).listen(port, welcome(port));\n    return app;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/common/server.js","import middleware from 'swagger-express-middleware';\nimport * as path from 'path';\nexport default function (app, routes) {\n  middleware(path.join(__dirname, 'Api.yaml'), app, function (err, middleware) {\n\n    // Enable Express' case-sensitive and strict options\n    // (so \"/entities\", \"/Entities\", and \"/Entities/\" are all different)\n    app.enable('case sensitive routing');\n    app.enable('strict routing');\n\n    app.use(middleware.metadata());\n    app.use(middleware.files({\n      // Override the Express App's case-sensitive and strict-routing settings for the Files middleware.\n      caseSensitive: false,\n      strict: false\n    }, {\n      useBasePath: true,\n      apiPath: process.env.SWAGGER_API_SPEC,\n      // Disable serving the \"Api.yaml\" file\n      // rawFilesPath: false\n    }));\n\n    app.use(middleware.parseRequest({\n      // Configure the cookie parser to use secure cookies\n      cookie: {\n        secret: process.env.SESSION_SECRET\n      },\n      // Don't allow JSON content over 100kb (default is 1mb)\n      json: {\n        limit: process.env.REQUEST_LIMIT\n      }\n    }));\n\n    // These two middleware don't have any options (yet)\n    app.use(\n      middleware.CORS(),\n      middleware.validateRequest());\n\n    // Error handler to display the validation error as HTML\n    app.use(function (err, req, res, next) {\n      res.status(err.status);\n      res.send(\n        '<h1>' + err.status + ' Error</h1>' +\n        '<pre>' + err.message + '</pre>'\n      );\n    });\n\n    routes(app);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/common/swagger/index.js","import examplesRouter from './api/controllers/examples/router'\nexport default function routes(app) {\n  app.use('/api/v1/examples',examplesRouter);\n};\n\n\n// WEBPACK FOOTER //\n// ./server/routes.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"pino\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pino\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"swagger-express-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"swagger-express-middleware\"\n// module id = 17\n// module chunks = 0"],"sourceRoot":""}